Documentation for the script "mmreduce" CJL, February 22 1996
-------------------------------------------------------------

COMMAND NAME:   mmreduce

SYNOPSIS:  Controls the analysis of mm-VLBI data

SYNTAX:  mmreduce

OPTION FLAGS:   None

ARGUMENTS:      None

ENVIRONMENT:    DATADIR

DESCRIPTION:

This is an interactive shell script designed to assist the user in reducing
millimeter-VLBI datasets.  The reduction of these datasets is a complex
business, involving several programs and many options.  Organizing the 
intermediate data products, and keeping track of what has been done to which
data, can be a daunting task.  The philosophy behind this script is to 
provide a framework in which the user can follow a well-defined sequence
of necessary steps, while at the same time allowing the user to stop,
backtrack, repeat steps, or perform detailed diagnostics outside the script,
at any time.

When the script is started up, it asks the user for information with which
to identify the subset of data he/she wishes to work with.  This information
takes the form of the experiment number, and a user-supplied string, which
are both used to identify all files belonging to this data analysis task.
The script examines the current directory for any files matching this
identification, and if found it offers the option of picking the analysis
up from where it was apparently left off (or any stage prior to that).
At all stages, the user is invited to examine and/or edit the intermediate
data products with the "aedit" program (all data products are in standard
afile format), so a clear picture of the dataset can be maintained at all
stages.  The script takes a lot of the hard work out of setting up segmenting,
averaging and other jobs, and automatically keeps the files for a single
analysis thread together, organized by filename.  The script, however, is
no substitute for a thorough understanding of the mm-VLBI data analysis
process.  Such an understanding is mandatory for the generation of useful
(or correct) results.

Below are listed the data analysis steps which are coordinated by mmreduce,
along with the names of the intermediate files generated by each step.
The string (id) refers to the identifier (experiment number and user
supplied string) which ties all the files in a given analysis thread
together.

Description of step		File(s)		File contents
-------------------------------------------------------------

Generation of initial		(id).alist	Raw A-file from alist program
alist dataset for experiment


Creation of masterlist of	(id).mlist	Subset of alist, with type-2
data to reduce					lines the user wants to reduce.


Creation of user-approved	(id).mlistf	mlist file after examination
version of mlist file				and editing by user


Creation of list of type-2	(id).codet	Strict subset of mlistf file
lines with coherent detections 			with detections


Creation of user-approved	(id).codetf	codet file after examination
version of codet file				and editing by user


Determination of coherence	(id).cofit	Coherence-fitted version of 
times for the coherently			codetf file
detected scans			(id).coavg	Input file for cofit
				(id).cofit_ps	Postscript plot file from cofit
						(if requested by user)


Creation of user-approved	(id).cofitf	cofit file after examination
version of cofit file				and editing by user


Interpolation of coherence	(id).cmlist	Copy of mlist file with all
times to the masterlist				coherence time fields filled in


Creation of user-approved	(id).cmlistf	cmlist file after examination
version of cmlist file				and editing by user


Fringe search over a grid	(id).fmlist	Masterlist with rate, delay, 
of rate and mbdelay				SNR and quality factor filled in.
				(id).srchgrid	Voluminous file containing one
						record for each grid point
				(id).srch_ps	Postscript plot file from search
						(if requested by user)


Creation of user-approved	(id).fmlistf	fmlist file after examination
version of fmlist file				and editing by user


Creation of final export	(id).vis	Optimally generated visibility
dataset						records ready for export in
						desired format, or examination
						in afile format.
