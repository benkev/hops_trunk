Documentation for the program "cofit", CJL, April 25 1996
---------------------------------------------------------

COMMAND NAME:   cofit

SYNOPSIS:  Calculates baseline-based coherence times

SYNTAX:  cofit [-c cotime] [-d device] [-m msglevel] [-o outfile] [-x] filelist

OPTION FLAGS:	-c cotime
			Sets an upper limit to the coherence time that
			can be generated by cofit.  This is needed for
			cases where little coherence loss exists, very
			long times can be formally fitted, and later
			programs can get confused.  Defaults to 392 sec.

		-d device
			Specifies the output graphics device for the plots
			of amplitude and SNR versus segmentation time.
			The specification is in the standard PGPLOT form
			of filename/devicetype (e.g. test.ps/ps)

		-m msglevel
			Verbosity control parameter, ranging from -3 to +3,
			with lower numbers being more verbose.  The default
			value is 1.

		-o outfile
			If specified, this flag directs the A-file output
			of cofit to the named file.  If omitted, cofit
			writes its output to stdout.

		-x
			Shorthand for "-d /xw", the xwindow display.

ARGUMENTS:	filelist
			One or more input A-files which contain data generated
			by "average -c".  These data have been segmented at a
			variety of segmentation times by "fringex", then
			incoherently scan averaged using "average".
			

ENVIRONMENT:	None.


DESCRIPTION:

The program cofit is designed to automate the process of determining the 
coherence times of data for many baselines and scans.  The input to the program
is a family of A-file lines for each baseline and each scan.  The family of
lines consists of scan-length incoherent averages for a variety of segmentation
times.  Depending on the coherence properties of the original data, the
amplitudes should show a plateau at short segmentation times, followed by
increasing coherence loss and decreased amplitude as the segmentation time
increases.  The SNR should show a maximum somewhere near the point at which
the amplitude plateau (signifying negligible coherence losses) ends.  Cofit
constructs these functions of amplitude and SNR and fits simple functional
forms to them.  It then uses these fits to determine the segmentation time
at which no more than 5 percent amplitude loss occurs, and at which the SNR
is maximized for weak sources (these two segmentation times are generally
not equal).  The coherence times thus determined are written into the 
appropriate fields in the A-file line, and one line is written out per
baseline/scan.  This information is then used by subsequent HOPS software.

The program will accept only data written by "average -c".  In general, cofit
will be invoked from a script which coordinates the actions of fringex and
average.
